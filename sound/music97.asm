; ===========================================================================
; ---------------------------------------------------------------------------
; Music 97 - 2Unlimited - Get Ready For This
; ---------------------------------------------------------------------------
		include	"sound\Macros.asm"
; ---------------------------------------------------------------------------

M97:		dc.w	M97_VoiceFM-M97				; Voice list address
		dc.b	(M97_DACFM_End-M97_DACFM)/4		; Number of DAC & FM channels
		dc.b	(M97_PSG_End-M97_PSG)/6			; Number of PSG channels
		dc.b	$01, $06				; tempo (Multiply, Frame)

	; --- PCM & FM channels ---

M97_DACFM:
		dc.w	M97_PCM1-M97				; PCM 1 tracker address
		dc.b	$00, $00				; '' (Pitch, Volume)
		dc.w	M97_PCM2-M97				; PCM 2 tracker address
		dc.b	$00, $00				; '' (Pitch, Volume)
		dc.w	M97_FM1-M97				; FM 1 tracker address
		dc.b	$00, $08				; '' (Pitch, Volume)
		dc.w	M97_FM2-M97				; FM 2 tracker address
		dc.b	$00, $08				; '' (Pitch, Volume)
		dc.w	M97_FM3-M97				; FM 3 tracker address
		dc.b	$00, $08				; '' (Pitch, Volume)
		dc.w	M97_FM4-M97				; FM 4 tracker address
		dc.b	$00, $08				; '' (Pitch, Volume)
		dc.w	M97_FM5-M97				; FM 5 tracker address
		dc.b	$00, $08				; '' (Pitch, Volume)
M97_DACFM_End:

	; --- PSG channels ---

M97_PSG:
		dc.w	M97_PSG1-M97				; PSG 1 tracker address
		dc.b	$00, $00				; '' (Pitch, Volume)
		dc.w	$0000					; '' (Starting tone)
		dc.w	M97_PSG2-M97				; PSG 2 tracker address
		dc.b	$00, $00				; '' (Pitch, Volume)
		dc.w	$0000					; '' (Starting tone)
		dc.w	M97_PSG3-M97				; PSG 3 tracker address
		dc.b	$00, $00				; '' (Pitch, Volume)
		dc.w	$0000					; '' (Starting tone)
M97_PSG_End:

; ===========================================================================
; ---------------------------------------------------------------------------
; FM Voices
; ---------------------------------------------------------------------------

M97_VoiceFM:
		dc.b	$3A
		dc.b	$61,$3C,$14,$30, $9C,$DB,$9C,$DA, $04,$09,$04,$03
		dc.b	$03,$01,$03,$00, $1F,$0F,$0F,$AF, $21,$47,$31,$80

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 1
; ---------------------------------------------------------------------------

M97_PSG1:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 2
; ---------------------------------------------------------------------------

M97_PSG2:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; PSG 3
; ---------------------------------------------------------------------------

M97_PSG3:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 1
; ---------------------------------------------------------------------------

M97_FM1:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 2
; ---------------------------------------------------------------------------

M97_FM2:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 3
; ---------------------------------------------------------------------------

M97_FM3:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 4
; ---------------------------------------------------------------------------

M97_FM4:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; FM 5
; ---------------------------------------------------------------------------

M97_FM5:
		Halt

; ===========================================================================
; ---------------------------------------------------------------------------
; PCM 1
; ---------------------------------------------------------------------------

M97_PCM1:
		VoicPSG	$38

M97P1_Loop01:
		Call	M97P1_Scratch1
		Call	M97P1_Scratch2
		Call	M97P1_Scratch1
		Call	M97P1_Scratch3
		Loop	$00,$02,M97P1_Loop01
		dc.b	$80,$0C
		VoicPSG	$3A
		dc.b	$B1,$30
		VoicPSG	$38
		dc.b	$AA,$0C
		dc.b	$AC,$0C
		dc.b	$AF,$0C

M97P1_Loop02:
		Call	M97P1_Scratch1
		Call	M97P1_Scratch2
		Call	M97P1_Scratch1
		Call	M97P1_Scratch3
		Loop	$00,$02,M97P1_Loop02

M97P1_Loop03:
		Call	M97P1_Verse
		dc.b	$B4,$08
		VoicPSG	$3B
		dc.b	$B1,$1C
		VoicPSG	$38

		Call	M97P1_Verse
		dc.b	$AC,$08
		VoicPSG	$3B
		dc.b	$B1,$1C
		VoicPSG	$38

		Call	M97P1_Verse
		dc.b	$B4,$08
		VoicPSG	$3B
		dc.b	$B1,$1C
		VoicPSG	$38

		Call	M97P1_VerseEnd
		Loop	$00,$02,M97P1_Loop03

		Halt

M97P1_Verse:
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AF,$06
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AF,$06
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		Return

M97P1_VerseEnd:
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AF,$06
		dc.b	$B1,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$B1,$06
		dc.b	$AF,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AA,$06
		VoluPSG	$70
		dc.b	$06
		VoluPSG	$90
		dc.b	$AA,$0C
		dc.b	$AC,$0C
		dc.b	$AF,$0C
		Return


M97P1_Scratch1:
		dc.b	$B1,$12
		dc.b	$B1,$12
		dc.b	$B1,$0C
		dc.b	$AA,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AA,$0C
		dc.b	$AC,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$AC,$0C
		Return

M97P1_Scratch2:
		dc.b	$B1,$12
		dc.b	$B1,$12
		dc.b	$B1,$0C
		dc.b	$B4,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$B4,$0C
		dc.b	$B6,$08
		VoluPSG	$70
		dc.b	$04
		VoluPSG	$90
		dc.b	$B6,$0C
		Return

M97P1_Scratch3:
		dc.b	$B1,$12
		dc.b	$B1,$12
		dc.b	$B1,$0C
		dc.b	$B4,$08
		VoluPSG	$70
		dc.b	$B4,$04
		VoluPSG	$90
		dc.b	$B4,$0C
		dc.b	$B6,$08
		VoluPSG	$70
		dc.b	$B6,$04
		VoluPSG	$90
		dc.b	$B8,$0C
		Return

; ===========================================================================
; ---------------------------------------------------------------------------
; PCM 2
; ---------------------------------------------------------------------------

M97_PCM2:
		dc.b	$80,$60,$60,$60,$60,$60,$60,$60,$60
		dc.b	$80,$60
		dc.b	$80,$60,$60,$60,$60,$60,$60,$60,$60

M97_P2_Loop1:
		dc.b	$80,$60,$60,$60,$30-4
		VoicPSG	$3B
		dc.b	$B1,$30+4
		Loop	$00,$02,M97_P2_Loop1
		Halt

; ===========================================================================